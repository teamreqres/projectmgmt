function AssignedItems(t,e,i){this.target=$(t),this.current=e,this.assignedType=i,this.init=function(){$.get("/ajax/"+this.current.type+"/"+this.current.id+"/assignedTo",function(t){for(var e=0;e<t.length;e++)this.target.find("ul.list-group").append(this.returnHTML(t[e].id,t[e].name));$(".assigned-loading",this.target).fadeOut(400,function(){$(".card",this.target).slideDown()}.bind(this))}.bind(this)).fail(function(t){console.log(t)})},this.returnHTML=function(t,e){var i="<li>";return i+='<a href="/'+this.assignedType.toLowerCase()+"/"+t+'" class="list-group-item list-group-item-action flex-column align-items-start">',i+='<span class="badge badge-secondary">'+this.assignedType+"</span>",i+="<br>"+e,i+="</a>",i+="</li>"},this.target.length&&this.init()}function RelatedChooser(t,e,i){this.target=$(t),this.current=e,this.related=i,this.init=function(){this.initChooserForm(),$("#relatedContainer",this.target).hide(),$("#relatedContainer",this.target).sortable(),$.get("/ajax/"+this.current.type.toLowerCase()+"/"+this.current.id+"/"+this.related.toLowerCase(),function(t){for(var e=0;e<t.length;e++)$("#relatedContainer",this.target).append(this.returnHTML(t[e].id,t[e].name));$(".related-loading",this.target).fadeOut(400,function(){$("#relatedContainer",this.target).slideDown()}.bind(this))}.bind(this)).fail(function(t){console.log(t)}),$("#existingChoice",this.target).hide(),this.target.find("#existingChoice").empty(),$.get("/ajax/"+this.related.toLowerCase(),function(t){this.target.find("#existingChoice").append("<option selected disabled>- Select a "+this.related.toLowerCase()+"-</option>");for(var e=0;e<t.length;e++)this.target.find("#existingChoice").append("<option value="+t[e].id+">"+t[e].name+"</option>");$(".existing-choice-loading",this.target).fadeOut(400,function(){$("#existingChoice",this.target).slideDown()}.bind(this))}.bind(this)).fail(function(t){console.log(t)})},this.initChooserForm=function(){$("#addRelatedForm",this.target).hide(),$("button#addRelated",this.target).click(function(){$("#addRelatedForm",this.target).slideToggle("slow")})},this.returnHTML=function(t,e){var i='<div data-id="'+t+'" class="card mb-3">';return i+='<div class="card-header pr-0 py-0 d-flex align-items-center"><i class="fa fa-arrows" aria-hidden="true"></i>&nbsp;',i+=e,i+='<div class="ml-auto">',i+='<button class="btn btn-link text-danger mr-1" type="submit" name="removeRelated" value="'+t+'"><i class="fa fa-minus-circle" aria-hidden="true"></i> Remove</button>',i+='<a href="/'+this.related.toLowerCase()+"/"+t+'" class="btn btn-primary"><i class="fa fa-pencil" aria-hidden="true"></i> Edit</a>',i+="</div>",i+="</div>",i+='<input type="hidden" name="'+this.related.toLowerCase()+'[]" value="'+t+'">',i+="</div>"},this.target.length&&this.init()}function Sidebar(t){this.target=$(t),this.dataType="",this.data=[],this.init=function(){this.dataType=t.attr("data-type"),this.loadData(),this.initSearchForm(),this.initSortButton(),this.initMobileToggle()},this.loadData=function(){$(".sidebar-items",this.target).hide(),$.get("/ajax/"+this.dataType,function(t){this.data=t,this.renderItems(this.data),$(".sidebar-loading",this.target).fadeOut(400,function(){$(".sidebar-items",this.target).slideDown()}.bind(this))}.bind(this)).fail(function(t){console.log(t)})},this.initSearchForm=function(){var i=this;$(this.target).find("input[name=searchName]").keyup(function(){var e=this.value;if(e){var t=i.data.find(function(t){return-1!==t.name.toLowerCase().search(e.toLowerCase())});t?i.renderItems([t]):i.emptyItems()}else i.renderItems(i.data)})},this.initSortButton=function(){var t=this;$(this.target).find("button[name=sort]").click(function(){t.data.sort(function(t,e){var i=t.name.toUpperCase(),a=e.name.toUpperCase();return i<a?-1:a<i?1:0}),t.renderItems(t.data),"desc"==$(this).attr("data-sortby")?(t.renderItems(t.data.reverse()),$(this).attr("data-sortby","asc")):(t.renderItems(t.data),$(this).attr("data-sortby","desc"))})},this.initMobileToggle=function(){$("button[data-toggle=sidebarToggle]").click(function(){$(this.target).toggleClass("open")}.bind(this))},this.renderItems=function(t){this.emptyItems();for(var e=0;e<t.length;e++){var i=this.renderItem(t[e]);$(this.target).find(".sidebar-items").append(i)}},this.renderItem=function(t){var e='<a href="/'+this.dataType+"/"+t.id+'" class="list-group-item list-group-item-action flex-column align-items-start">';return e+='<span class="badge badge-secondary">'+this.dataType.charAt(0).toUpperCase()+this.dataType.slice(1)+"</span>",e+="<h5>"+t.name+"</h5>",e+="</a>"},this.emptyItems=function(){$(this.target).find(".sidebar-items").empty()},this.init()}$.fn.sidebar=function(){if(this.length)return new Sidebar(this)};